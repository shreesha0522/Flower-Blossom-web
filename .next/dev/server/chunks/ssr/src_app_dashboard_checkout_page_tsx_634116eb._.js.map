{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/app/dashboard/checkout/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useCart } from \"@/app/context/CartContext\";\n\nexport default function CheckoutPage() {\n  const router = useRouter();\n  const { cart, clearCart } = useCart();\n\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [deliveryTime, setDeliveryTime] = useState(\"Morning\");\n\n  const [paymentMethod, setPaymentMethod] = useState(\"esewa\");\n  const [processing, setProcessing] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [orderNumber, setOrderNumber] = useState(\"\");\n\n  const subtotal = cart.reduce(\n    (sum, item) => sum + (item.discountedPrice || item.price) * (item.quantity || 1),\n    0\n  );\n  const delivery = 500;\n  const total = subtotal + delivery;\n\n  const handlePayment = async () => {\n    if (!name || !phone || !location) {\n      alert(\"Please fill all shipping details!\");\n      return;\n    }\n\n    if (cart.length === 0) {\n      alert(\"Your cart is empty!\");\n      return;\n    }\n\n    setProcessing(true);\n\n    try {\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n\n      const newOrderNumber = `ORD-${new Date().getFullYear()}-${String(\n        Math.floor(Math.random() * 10000)\n      ).padStart(4, \"0\")}`;\n\n      const order = {\n        _id: Date.now().toString(),\n        orderNumber: newOrderNumber,\n        date: new Date().toISOString().split(\"T\")[0],\n        total,\n        status: \"pending\",\n        items: cart.map((item) => ({\n          id: item.id,\n          name: item.name,\n          quantity: item.quantity,\n          price: item.discountedPrice || item.price,\n          image: item.image,\n        })),\n        deliveryAddress: location,\n        deliveryTime,\n        customerName: name,\n        customerPhone: phone,\n        paymentMethod,\n      };\n\n      const existingOrders = JSON.parse(localStorage.getItem(\"orders\") || \"[]\");\n      localStorage.setItem(\"orders\", JSON.stringify([order, ...existingOrders]));\n\n      setOrderNumber(newOrderNumber);\n      setSuccess(true);\n\n      clearCart();\n\n      setTimeout(() => {\n        router.push(\"/dashboard/orders\");\n      }, 3000);\n    } catch (error) {\n      console.error(\"Payment error:\", error);\n      alert(\"Payment failed. Please try again.\");\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  if (cart.length === 0 && !success) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-6\">\n        <div className=\"bg-white rounded-xl p-12 text-center max-w-md\">\n          <div className=\"text-6xl mb-4\">ðŸ›’</div>\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Your cart is empty</h2>\n          <p className=\"text-gray-500 mb-6\">Add some flowers before checking out!</p>\n          <button\n            onClick={() => router.push(\"/dashboard/catalog\")}\n            className=\"px-6 py-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition font-semibold\"\n          >\n            Browse Flowers\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <h1 className=\"text-3xl font-bold text-gray-800 mb-8\">Checkout</h1>\n\n      <div className=\"bg-white rounded-xl p-6 mb-6 border border-pink-100 max-w-2xl mx-auto space-y-2\">\n        <h2 className=\"text-xl font-bold mb-2\">Order Summary</h2>\n        <div className=\"flex justify-between text-gray-600\">\n          <span>Subtotal</span>\n          <span>Rs {subtotal.toLocaleString()}</span>\n        </div>\n        <div className=\"flex justify-between text-gray-600\">\n          <span>Delivery</span>\n          <span>Rs {delivery.toLocaleString()}</span>\n        </div>\n        <hr className=\"border-pink-100 my-2\" />\n        <div className=\"flex justify-between text-lg font-bold text-gray-800\">\n          <span>Total</span>\n          <span className=\"text-pink-500\">Rs {total.toLocaleString()}</span>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl p-6 mb-6 border border-pink-100 max-w-2xl mx-auto space-y-4\">\n        <h2 className=\"text-xl font-bold mb-4\">Shipping Information</h2>\n        <div className=\"space-y-3\">\n          <input\n            type=\"text\"\n            placeholder=\"Full Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            className=\"w-full px-4 py-2 border border-pink-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500\"\n          />\n          <div className=\"flex gap-2\">\n            <div className=\"w-24\">\n              <input\n                type=\"text\"\n                value=\"+977\"\n                readOnly\n                className=\"w-full px-4 py-2 border border-pink-200 rounded-lg bg-gray-100 text-gray-700 font-semibold\"\n              />\n            </div>\n            <input\n              type=\"tel\"\n              placeholder=\"98XXXXXXXX\"\n              value={phone}\n              onChange={(e) => setPhone(e.target.value)}\n              maxLength={10}\n              className=\"flex-1 px-4 py-2 border border-pink-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500\"\n            />\n          </div>\n          <input\n            type=\"text\"\n            placeholder=\"Location / Address\"\n            value={location}\n            onChange={(e) => setLocation(e.target.value)}\n            className=\"w-full px-4 py-2 border border-pink-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500\"\n          />\n          <select\n            value={deliveryTime}\n            onChange={(e) => setDeliveryTime(e.target.value)}\n            className=\"w-full px-4 py-2 border border-pink-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500\"\n          >\n            <option value=\"Morning\">Morning (8AM - 12PM)</option>\n            <option value=\"Afternoon\">Afternoon (12PM - 4PM)</option>\n            <option value=\"Evening\">Evening (4PM - 8PM)</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl p-6 border border-pink-100 max-w-2xl mx-auto space-y-4\">\n        <h2 className=\"text-xl font-bold mb-4\">Payment Method</h2>\n        <div className=\"flex flex-col gap-3\">\n          <label className=\"flex items-center gap-3 p-4 border border-pink-200 rounded-lg cursor-pointer hover:bg-pink-50 transition\">\n            <input\n              type=\"radio\"\n              name=\"payment\"\n              value=\"esewa\"\n              checked={paymentMethod === \"esewa\"}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"accent-pink-500 w-5 h-5\"\n            />\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">ðŸ’³</span>\n              <span className=\"font-semibold\">eSewa</span>\n            </div>\n          </label>\n          <label className=\"flex items-center gap-3 p-4 border border-pink-200 rounded-lg cursor-pointer hover:bg-pink-50 transition\">\n            <input\n              type=\"radio\"\n              name=\"payment\"\n              value=\"khalti\"\n              checked={paymentMethod === \"khalti\"}\n              onChange={(e) => setPaymentMethod(e.target.value)}\n              className=\"accent-pink-500 w-5 h-5\"\n            />\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-lg\">ðŸ’°</span>\n              <span className=\"font-semibold\">Khalti</span>\n            </div>\n          </label>\n        </div>\n\n        <button\n          onClick={handlePayment}\n          disabled={processing || success}\n          className={`w-full py-3 px-4 mt-4 rounded-full text-white font-semibold ${\n            processing || success ? \"bg-gray-400 cursor-not-allowed\" : \"bg-pink-500 hover:bg-pink-600\"\n          } transition`}\n        >\n          {processing\n            ? \"Processing Payment...\"\n            : success\n            ? \"âœ“ Payment Successful!\"\n            : `Pay Rs ${total.toLocaleString()} & Place Order`}\n        </button>\n\n        {success && (\n          <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg\">\n            <p className=\"text-green-700 font-semibold text-center mb-2\">\n              ðŸŽ‰ Payment Successful!\n            </p>\n            <p className=\"text-green-600 text-sm text-center\">\n              Order Number: <span className=\"font-bold\">{orderNumber}</span>\n            </p>\n            <p className=\"text-green-600 text-sm text-center mt-1\">\n              Redirecting to your orders...\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}