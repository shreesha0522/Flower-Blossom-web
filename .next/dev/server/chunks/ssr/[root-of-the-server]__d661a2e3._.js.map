{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/app/layout.tsx"],"sourcesContent":["\"use client\";\nimport { ReactNode, useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\n\ninterface User {\n  id: string;\n  name: string;\n  username: string;\n  email: string;\n  role: \"user\" | \"admin\";\n}\n\nexport default function DashboardLayout({ children }: { children: ReactNode }) {\n  const router = useRouter();\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\n  const [cartCount, setCartCount] = useState(3); // optional: fetch real cart count\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check authentication on mount\n    const authToken = localStorage.getItem(\"authToken\");\n    const userData = localStorage.getItem(\"user\");\n\n    if (!authToken || !userData) {\n      router.push(\"/login\");\n      return;\n    }\n\n    try {\n      const parsedUser: User = JSON.parse(userData);\n\n      // Redirect admin users to admin dashboard\n      if (parsedUser.role === \"admin\") {\n        router.push(\"/admin/dashboard\");\n        return;\n      }\n\n      // Normal user\n      setUser(parsedUser);\n    } catch (error) {\n      console.error(\"Error parsing user data:\", error);\n      router.push(\"/login\");\n      return;\n    }\n\n    setLoading(false);\n  }, [router]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"authToken\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"rememberMe\");\n    router.push(\"/login\");\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-pink-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-5xl mb-4 animate-bounce\">ðŸŒ¸</div>\n          <p className=\"text-pink-500 text-lg font-medium\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) return null; // just in case\n\n  return (\n    <div className=\"min-h-screen bg-pink-50\">\n      <nav className=\"bg-white shadow-sm border-b border-pink-100\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <Link\n              href=\"/dashboard\"\n              className=\"flex items-center gap-2 text-pink-500 font-bold text-xl\"\n            >\n              ðŸŒ¸ <span>Flower Blossom</span>\n            </Link>\n\n            <div className=\"hidden md:flex gap-8 text-gray-600 font-medium\">\n              <Link href=\"/dashboard\" className=\"hover:text-pink-500 transition\">\n                Home\n              </Link>\n              <Link\n                href=\"/dashboard/catalog\"\n                className=\"hover:text-pink-500 transition\"\n              >\n                Catalog\n              </Link>\n              <Link\n                href=\"/dashboard/orders\"\n                className=\"hover:text-pink-500 transition\"\n              >\n                My Orders\n              </Link>\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n              <Link\n                href=\"/dashboard/cart\"\n                className=\"relative p-2 hover:bg-pink-50 rounded-full transition\"\n              >\n                ðŸ›’\n                {cartCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-pink-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full\">\n                    {cartCount}\n                  </span>\n                )}\n              </Link>\n\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowProfileMenu(!showProfileMenu)}\n                  className=\"flex items-center gap-2 p-2 hover:bg-pink-50 rounded-full transition\"\n                >\n                  <span className=\"text-2xl\">ðŸ‘¤</span>\n                  <span className=\"hidden md:inline text-sm font-medium text-gray-700\">\n                    {user.name || user.username}\n                  </span>\n                </button>\n\n                {showProfileMenu && (\n                  <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 border border-pink-100 z-50\">\n                    <div className=\"px-4 py-3 border-b border-pink-100\">\n                      <p className=\"text-sm font-semibold text-gray-800\">\n                        {user.name || user.username}\n                      </p>\n                      <p className=\"text-xs text-gray-500 truncate\">{user.email}</p>\n                    </div>\n\n                    <Link\n                      href=\"/dashboard/profile\"\n                      className=\"block px-4 py-2 text-gray-700 hover:bg-pink-50 transition\"\n                      onClick={() => setShowProfileMenu(false)}\n                    >\n                      ðŸ‘¤ Profile\n                    </Link>\n                    <Link\n                      href=\"/dashboard/orders\"\n                      className=\"block px-4 py-2 text-gray-700 hover:bg-pink-50 transition\"\n                      onClick={() => setShowProfileMenu(false)}\n                    >\n                      ðŸ“¦ Orders\n                    </Link>\n                    <hr className=\"my-2 border-pink-100\" />\n                    <button\n                      onClick={handleLogout}\n                      className=\"w-full text-left px-4 py-2 text-red-600 hover:bg-pink-50 transition\"\n                    >\n                      ðŸšª Logout\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}