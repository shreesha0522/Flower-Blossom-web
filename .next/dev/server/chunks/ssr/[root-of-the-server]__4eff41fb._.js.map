{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/lib/cookie.ts"],"sourcesContent":["// /* eslint-disable @typescript-eslint/no-explicit-any */\n// \"use server\";\n// import { cookies } from \"next/headers\";\n// export const setAuthToken = async (token: string) => {\n//     const cookieStore = await cookies();\n//     cookieStore.set({name: \"auth_token\", value: token});\n// }\n// export const getAuthToken = async () => {\n//     const cookieStore = await cookies();\n//     return cookieStore.get(\"auth_token\")?.value || null;\n// }\n// export const setUserData = async (userData: any ) => {\n//     const cookieStore = await cookies();\n//     // cookie can only store string values\n//     cookieStore.set({name: \"user_data\", value: JSON.stringify(userData)});\n// }\n// export const getUserData = async () => {\n//     const cookieStore = await cookies();\n//     const data = cookieStore.get(\"user_data\")?.value || null;\n//     return data ? JSON.parse(data) : null;\n// }\n// export const clearAuthCookies = async () => {\n//     const cookieStore = await cookies();\n//     cookieStore.delete(\"auth_token\");\n//     cookieStore.delete(\"user_data\");\n// }\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\n\"use server\";\nimport { cookies } from \"next/headers\";\n\nexport const setAuthToken = async (token: string) => {\n  const cookieStore = await cookies();\n  cookieStore.set({\n    name: \"auth_token\",\n    value: token,\n    httpOnly: false,   // âœ… ADDED: lets browser JS read the cookie\n    path: \"/\",         // âœ… ADDED: cookie available on all routes\n    sameSite: \"lax\",   // âœ… ADDED: basic CSRF protection\n  });\n}\n\nexport const getAuthToken = async () => {\n  const cookieStore = await cookies();\n  return cookieStore.get(\"auth_token\")?.value || null;\n}\n\nexport const setUserData = async (userData: any) => {\n  const cookieStore = await cookies();\n  cookieStore.set({ name: \"user_data\", value: JSON.stringify(userData) });\n}\n\nexport const getUserData = async () => {\n  const cookieStore = await cookies();\n  const data = cookieStore.get(\"user_data\")?.value || null;\n  return data ? JSON.parse(data) : null;\n}\n\nexport const clearAuthCookies = async () => {\n  const cookieStore = await cookies();\n  cookieStore.delete(\"auth_token\");\n  cookieStore.delete(\"user_data\");\n}"],"names":[],"mappings":"AAAA,0DAA0D;AAC1D,gBAAgB;AAChB,0CAA0C;AAC1C,yDAAyD;AACzD,2CAA2C;AAC3C,2DAA2D;AAC3D,IAAI;AACJ,4CAA4C;AAC5C,2CAA2C;AAC3C,2DAA2D;AAC3D,IAAI;AACJ,yDAAyD;AACzD,2CAA2C;AAC3C,6CAA6C;AAC7C,6EAA6E;AAC7E,IAAI;AACJ,2CAA2C;AAC3C,2CAA2C;AAC3C,gEAAgE;AAChE,6CAA6C;AAC7C,IAAI;AACJ,gDAAgD;AAChD,2CAA2C;AAC3C,wCAAwC;AACxC,uCAAuC;AACvC,IAAI;AACJ,qDAAqD;;;;;;;;;;;;;AAIrD;;;;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,GAAG,CAAC;QACd,MAAM;QACN,OAAO;QACP,UAAU;QACV,MAAM;QACN,UAAU;IACZ;AACF;AAEO,MAAM,eAAe;IAC1B,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,OAAO,YAAY,GAAG,CAAC,eAAe,SAAS;AACjD;AAEO,MAAM,cAAc,OAAO;IAChC,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,GAAG,CAAC;QAAE,MAAM;QAAa,OAAO,KAAK,SAAS,CAAC;IAAU;AACvE;AAEO,MAAM,cAAc;IACzB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,OAAO,YAAY,GAAG,CAAC,cAAc,SAAS;IACpD,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;AACnC;AAEO,MAAM,mBAAmB;IAC9B,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;IACnB,YAAY,MAAM,CAAC;AACrB;;;IA/Ba;IAWA;IAKA;IAKA;IAMA;;AA3BA,+OAAA;AAWA,+OAAA;AAKA,+OAAA;AAKA,+OAAA;AAMA,+OAAA"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/lib/api/axios.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:5000\";\n\nconst axiosInstance = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  withCredentials: true, // âœ… VERY IMPORTANT\n});\n\n// Helper function to get token from cookie\nconst getTokenFromCookie = (): string | null => {\n  if (typeof window === \"undefined\") return null;\n\n  const cookies = document.cookie.split(\";\");\n\n  for (const cookie of cookies) {\n    const [name, ...rest] = cookie.trim().split(\"=\");\n    const value = rest.join(\"=\");\n\n    if (name === \"auth_token\") {\n      return decodeURIComponent(value);\n    }\n  }\n\n  return null;\n};\n\naxiosInstance.interceptors.request.use((config) => {\n  const token = getTokenFromCookie();\n\n  if (token) {\n    config.headers = config.headers || {};\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n});\n\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    console.error(\"API Error:\", error.response?.data || error.message);\n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,WACJ,6DAAwC;AAE1C,MAAM,gBAAgB,gJAAK,CAAC,MAAM,CAAC;IACjC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;AAEA,2CAA2C;AAC3C,MAAM,qBAAqB;IACzB,wCAAmC,OAAO;;;IAE1C,MAAM;IAED,MAAM;AAUb;AAEA,cAAc,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACtC,MAAM,QAAQ;IAEd,IAAI,OAAO;QACT,OAAO,OAAO,GAAG,OAAO,OAAO,IAAI,CAAC;QACpC,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IAEA,OAAO;AACT;AAEA,cAAc,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrC,CAAC,WAAa,UACd,CAAC;IACC,QAAQ,KAAK,CAAC,cAAc,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;IACjE,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/lib/api/endpoint.ts"],"sourcesContent":["export const API = {\n  AUTH : {\n    REGISTER: \"/api/auth/register\",\n    LOGIN: \"/api/auth/login\",\n    ME: \"/api/auth/me\"\n  }\n}"],"names":[],"mappings":";;;;AAAO,MAAM,MAAM;IACjB,MAAO;QACL,UAAU;QACV,OAAO;QACP,IAAI;IACN;AACF"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/lib/api/auth.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { setAuthToken, setUserData } from \"../cookie\";\nimport axios from \"./axios\";\nimport { API } from \"./endpoint\";\n\n // ðŸ‘ˆ your cookie functions\n\nexport const register = async (registerData: any) => {\n  try {\n    const response = await axios.post(API.AUTH.REGISTER, registerData, {\n      withCredentials: true,\n    });\n    return response.data;\n  } catch (error: any) {\n    throw new Error(\n      error?.response?.data?.message ||\n        error?.message ||\n        \"Registration Failed\"\n    );\n  }\n};\n\nexport const login = async (loginData: any) => {\n  try {\n    const response = await axios.post(API.AUTH.LOGIN, loginData, {\n      withCredentials: true,\n    });\n\n    // âœ… Save token + user in cookies\n    const token = response.data?.data?.token;\n    const user = response.data?.data;\n\n    if (token) {\n      await setAuthToken(token);\n    }\n\n    if (user) {\n      await setUserData(user);\n    }\n\n    return response.data;\n  } catch (error: any) {\n    throw new Error(\n      error?.response?.data?.message || error?.message || \"Login Failed\"\n    );\n  }\n};\n\nexport const getCurrentUser = async () => {\n  try {\n    const response = await axios.get(API.AUTH.ME, {\n      withCredentials: true,\n    });\n    return response.data;\n  } catch (error: any) {\n    throw new Error(\n      error?.response?.data?.message || error?.message || \"Failed to fetch user\"\n    );\n  }\n};\n"],"names":[],"mappings":";;;;;;;;AAAA,qDAAqD,GACrD;AACA;AACA;;;;AAIO,MAAM,WAAW,OAAO;IAC7B,IAAI;QACF,MAAM,WAAW,MAAM,qIAAK,CAAC,IAAI,CAAC,oIAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc;YACjE,iBAAiB;QACnB;QACA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,MACR,OAAO,UAAU,MAAM,WACrB,OAAO,WACP;IAEN;AACF;AAEO,MAAM,QAAQ,OAAO;IAC1B,IAAI;QACF,MAAM,WAAW,MAAM,qIAAK,CAAC,IAAI,CAAC,oIAAG,CAAC,IAAI,CAAC,KAAK,EAAE,WAAW;YAC3D,iBAAiB;QACnB;QAEA,iCAAiC;QACjC,MAAM,QAAQ,SAAS,IAAI,EAAE,MAAM;QACnC,MAAM,OAAO,SAAS,IAAI,EAAE;QAE5B,IAAI,OAAO;YACT,MAAM,IAAA,oIAAY,EAAC;QACrB;QAEA,IAAI,MAAM;YACR,MAAM,IAAA,mIAAW,EAAC;QACpB;QAEA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,MACR,OAAO,UAAU,MAAM,WAAW,OAAO,WAAW;IAExD;AACF;AAEO,MAAM,iBAAiB;IAC5B,IAAI;QACF,MAAM,WAAW,MAAM,qIAAK,CAAC,GAAG,CAAC,oIAAG,CAAC,IAAI,CAAC,EAAE,EAAE;YAC5C,iBAAiB;QACnB;QACA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,MACR,OAAO,UAAU,MAAM,WAAW,OAAO,WAAW;IAExD;AACF"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/src/lib/action/auth-action.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use server\";\n\nimport { login, register } from \"../api/auth\";\nimport { setAuthToken, setUserData } from \"../cookie\";\n\nexport type AuthResponse<T = any> = {\n  success: boolean;\n  message: string;\n  data?: T;\n  user?: {\n    id: string;\n    email: string;\n    name?: string;\n    role: \"admin\" | \"user\";\n  };\n};\n\n// ===== HANDLE REGISTER =====\nexport const handleRegister = async (formData: any): Promise<AuthResponse> => {\n  try {\n    const res = await register(formData);\n\n    if (res.success) {\n      return {\n        success: true,\n        data: res.data,\n        message: res.message || \"Registration successful\",\n      };\n    }\n\n    return {\n      success: false,\n      message: res.message || \"Registration failed\",\n    };\n  } catch (error: any) {\n    console.error(\"Register error:\", error);\n\n    return {\n      success: false,\n      message: error.message || \"Registration failed\",\n    };\n  }\n};\n\n// ===== HANDLE LOGIN =====\nexport const handleLogin = async (formData: any): Promise<AuthResponse> => {\n  try {\n    const res = await login(formData);\n\n    console.log(\"Backend login response:\", res);\n\n    if (!res.success) {\n      return {\n        success: false,\n        message: res.message || \"Login failed\",\n      };\n    }\n\n    // âœ… token is in res.token (your backend response)\n    const token = res.token;\n\n    if (!token) {\n      return {\n        success: false,\n        message: \"Token missing from backend response\",\n      };\n    }\n\n    // âœ… Save token + user in cookies\n    await setAuthToken(token);\n    await setUserData(res.data);\n\n    return {\n      success: true,\n      data: res.data,\n      message: res.message || \"Login successful\",\n      user: {\n        id: res.data?._id,\n        email: res.data?.email,\n        name: res.data?.username || res.data?.name,\n        role: res.data?.role || \"user\",\n      },\n    };\n  } catch (error: any) {\n    console.error(\"Login error:\", error);\n\n    return {\n      success: false,\n      message: error.message || \"Login failed\",\n    };\n  }\n};\n"],"names":[],"mappings":"AAAA,qDAAqD;;;;;;;AAGrD;AACA;;;;;AAeO,MAAM,iBAAiB,OAAO;IACnC,IAAI;QACF,MAAM,MAAM,MAAM,IAAA,qIAAQ,EAAC;QAE3B,IAAI,IAAI,OAAO,EAAE;YACf,OAAO;gBACL,SAAS;gBACT,MAAM,IAAI,IAAI;gBACd,SAAS,IAAI,OAAO,IAAI;YAC1B;QACF;QAEA,OAAO;YACL,SAAS;YACT,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,mBAAmB;QAEjC,OAAO;YACL,SAAS;YACT,SAAS,MAAM,OAAO,IAAI;QAC5B;IACF;AACF;AAGO,MAAM,cAAc,OAAO;IAChC,IAAI;QACF,MAAM,MAAM,MAAM,IAAA,kIAAK,EAAC;QAExB,QAAQ,GAAG,CAAC,2BAA2B;QAEvC,IAAI,CAAC,IAAI,OAAO,EAAE;YAChB,OAAO;gBACL,SAAS;gBACT,SAAS,IAAI,OAAO,IAAI;YAC1B;QACF;QAEA,kDAAkD;QAClD,MAAM,QAAQ,IAAI,KAAK;QAEvB,IAAI,CAAC,OAAO;YACV,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,iCAAiC;QACjC,MAAM,IAAA,oIAAY,EAAC;QACnB,MAAM,IAAA,mIAAW,EAAC,IAAI,IAAI;QAE1B,OAAO;YACL,SAAS;YACT,MAAM,IAAI,IAAI;YACd,SAAS,IAAI,OAAO,IAAI;YACxB,MAAM;gBACJ,IAAI,IAAI,IAAI,EAAE;gBACd,OAAO,IAAI,IAAI,EAAE;gBACjB,MAAM,IAAI,IAAI,EAAE,YAAY,IAAI,IAAI,EAAE;gBACtC,MAAM,IAAI,IAAI,EAAE,QAAQ;YAC1B;QACF;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gBAAgB;QAE9B,OAAO;YACL,SAAS;YACT,SAAS,MAAM,OAAO,IAAI;QAC5B;IACF;AACF;;;IAzEa;IA2BA;;AA3BA,+OAAA;AA2BA,+OAAA"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/shreeshashrestha/Desktop/untitled%20folder/Flower%20Bloosom%20web/.next-internal/server/app/%28auth%29/login/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {handleLogin as '40e5fee560dba4750a1ad45bd35ad5e7118bbd0487'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}